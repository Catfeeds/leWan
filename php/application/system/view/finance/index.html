<style type="text/css">

    .main{height:768px;position:relative;}
    div{border:0px solid white;margin:1px;}
    .layer{position:relative;width:100%;}
    #layer01 img{text-align: center;display: block;height: 35px;padding-top: 35px;margin: auto;}
    #layer02 > div{float:left;position:relative;}
    .layer02-data{position: absolute;width: auto;height: 100px;color: white;top: 45px;left: 65px;}
    .layer02-data:first-child{font-size: 18px;}
    .layer02-data:last-child{font-size: 12px;}
    .layer03-panel{height:100%;position:relative;float:left;}
    .layer03-left-label{position:absolute;}
    .layer03-left-label{top:10px;left:10px;color:white;height:20px;width:200px;font-weight: bold;}
    #layer03_left_label02{right:10px;top:10px;color:#036769;height:20px;width:200px;}
    .layer03-left-chart{position:relative;float:left;height:100%;}
    #layer03_right_label{position:absolute;top:10px;left:10px;color:white;height:20px;width:100px;}
    .layer03-right-chart{position:relative;float:left;height:100%;width:32%;}
    .layer03-right-chart-label{color: white;text-align: center;position: absolute;bottom: 60px;width: 100%;}
    .layer04-panel,.layer05-panel,.layer06-panel{position:relative;float:left;height:100%;width:80%;}
    .layer04-panel-label,.layer05-panel-label,.layer6-panel-label{width:100%;height:15%;color:white;padding-top:5px;}
    .layer04-panel-chart,.layer05-panel-chart,.layer06-panel-chart{width:100%;height:85%;}
    table,table tr,table td{text-align: center; padding: 9px 15px; min-height: 20px;line-height: 20px;background: none;border: none;color: #ffffff}
    #layer07  button{border: none;border-radius: 5px;margin: 10px;cursor: pointer;padding: 3px 7px;}

</style>

<!--<script src="/static/js/jquery.min.js"></script>-->
<script src="/static/js/echarts.min.js"></script>
<script src="/static/js/monitor.js"></script>


<div class="page">
    <div class="main">
        <div id="layer02" class="layer" style="margin-bottom: 20px;height: 160px;">
            <div class="layer03-left-label">平台总数据</div>
            <div style="clear: both"></div>
            <div id="layer02_01" style="width:160px;">
                <div class="layer02-data">
                    <span>{$total.total_order_business}</span>
                    <span>&yen;</span>
                </div>
                <canvas width="150" height="100"></canvas>
            </div>
            <div id="layer02_02" >
                <div class="layer02-data">
                    <span>{$total.total_order_payfee}</span>
                    <span>&yen;</span>
                </div>
                <canvas width="160" height="100"></canvas>
            </div>
            <div id="layer02_03">
                <div class="layer02-data">
                    <span>{$total.total_order_settle}</span>
                    <span>&yen;</span>
                </div>
                <canvas width="140" height="100"></canvas>
            </div>
            <div id="layer02_04">
                <div class="layer02-data">
                    <span>{$total.total_order_productnum}</span>
                    <span></span>
                </div>
                <canvas width="140" height="100"></canvas>
            </div>
            <div id="layer02_05">
                <div class="layer02-data">
                    <span>{$total.total_order_commission}</span>
                    <span>&yen;</span>
                </div>
                <canvas width="180" height="100"></canvas>
            </div>
            <div id="layer02_06" >
                <div class="layer02-data">
                    <span>{$total.total_order_coupon}</span>
                    <span></span>
                </div>
                <canvas width="160" height="100"></canvas>
            </div>
            <div id="layer02_07" >
                <div class="layer02-data">
                    <span>{$total.total_jiesuan_commission}</span>
                    <span></span>
                </div>
                <canvas width="140" height="100"></canvas>
            </div>
            <div id="layer02_08" >
                <div class="layer02-data">
                    <span>{$total.total_withdraw}</span>
                    <span></span>
                </div>
                <canvas width="150" height="100"></canvas>
            </div>
            <div id="layer02_09" >
                <div class="layer02-data">
                    <span>{$total.total_taxfee}</span>
                    <span></span>
                </div>
                <canvas width="140" height="100"></canvas>
            </div>
            <div id="layer02_10" >
                <div class="layer02-data">
                    <span>{$total.total_merchant_settle}</span>
                    <span></span>
                </div>
                <canvas width="150" height="100"></canvas>
            </div>
            <div style="clear: both"></div>
        </div>

        <div id="layer07" class="layer" style="clear: both;margin: 20px 0;">
            <button onclick="window.location.href='?tag=day'">按天统计</button>
            <button onclick="window.location.href='?tag=month'">按月统计</button>
        </div>
        <div id="layer03" class="layer" style="height:40%;">
            <div id="layer03_left" style="width:48%;" class="layer03-panel">
                <div id="layer03_left_label01" class="layer03-left-label">
                    <if condition="isset($_REQUEST['tag']) && $_REQUEST['tag'] eq 'month'">本月订单销售<else/>今日订单销售</if>
                </div>
                <div id="layer03_left_01" class="layer03-left-chart" style="width:16%;">
                    <canvas width="100" height="300" style="margin:30px 0 0 20px;"></canvas>
                </div>

                <div id="layer03_left_02" class="layer03-left-chart" style="width:80%;"></div>
            </div>

            <div id="layer04_left" style="width:48%;" class="layer03-panel">

            </div>
        </div>
        <div id="layer04" class="layer" style="height:30%;">
            <div id="layer04_right" class="layer04-panel">
                <div id="layer04_right_label" class="layer04-panel-label">
                    <span>订单销售/</span><span style="color:#00A09A;">{$orderTit}</span>
                </div>
                <div id="layer04_right_chart" class="layer04-panel-chart"></div>
            </div>
        </div>

        <div id="layer05" class="layer" style="height:30%;margin-top: 50px;">
            <div id="layer05_row" class="layer05-panel">
                <div id="layer05_row_label" class="layer05-panel-label">
                    <span>收支详情/</span><span style="color:#00A09A;">{$orderTit}</span>
                </div>
                <div id="layer05_chart" class="layer05-panel-chart"></div>
            </div>
        </div>
        <div id="layer06" class="layer" style="height:30%;margin-top: 50px;">
            <div id="layer06_row" class="layer05-panel">
                <div id="layer06_row_label" class="layer05-panel-label">
                    <span>活跃情况/</span><span style="color:#00A09A;">{$orderTit}</span>
                </div>
                <div id="layer06_chart" class="layer05-panel-chart"></div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function(){
        $('.page').css('background-image'," url('/static/images/financebj.png'");
        $('.main').css('width',($('.page').width()*0.9)+'px');

        drawLayer02Label($("#layer02_01 canvas").get(0),"订单总额",65,200);
        drawLayer02Label($("#layer02_02 canvas").get(0),"订单支付总额",65,200);
        drawLayer02Label($("#layer02_03 canvas").get(0),"订单总成本",65,400);
        drawLayer02Label($("#layer02_04 canvas").get(0),"商品出售数量",60,200);
        drawLayer02Label($("#layer02_05 canvas").get(0),"佣金总额",65,200);//订单总分出去的佣金总额
        drawLayer02Label($("#layer02_06 canvas").get(0),"使用优惠券总额",50,200);
        drawLayer02Label($("#layer02_07 canvas").get(0),"总已结算佣金",60,200);
        drawLayer02Label($("#layer02_08 canvas").get(0),"总提现成功额",60,200);
        drawLayer02Label($("#layer02_09 canvas").get(0),"总手续费",60,200);
        drawLayer02Label($("#layer02_10 canvas").get(0),"商家结算总额",60,200);

        //饼状图
        renderChartBar03();
        //订单
        renderLayer04Right();
        //收支
        renderLayer05();
        //活跃
        renderLayer06();

        //存储
     //   renderLayer03Right();

        //30天日均线流量趋势
//        renderLayer04Left();

    });

    function renderChartBar03(){
        var obj = document.getElementById("layer03_left_02");
        var row_tit = ['订单总总金额','订单总支付金额','订单总成本价','总预约加价金额'];
        var colors = [COLOR.MACHINE.TYPE_A,COLOR.MACHINE.TYPE_B,COLOR.MACHINE.TYPE_D,COLOR.MACHINE.TYPE_F];
        var $list = [
                        {value:"{$data.total_order_business}", name:'订单总总金额'},
                        {value:"{$data.total_order_payfee}", name:'订单总支付金额'},
                        {value:"{$data.total_order_settle}", name:'订单总成本价'},
                        {value:"{$data.total_order_addfee}", name:'总预约加价金额'},
                    ];
        pieChart(obj,'',row_tit,colors,$list);
        return true;
    }

    function renderLayer04Right(){
        var data = {$list};
        var  total_order_business= new Array(),total_order_payfee= new Array(),total_order_settle= new Array(),total_order_addfee= new Array();
        $.each(data, function (n, value) {
            total_order_business.push(value.total_order_business);
            total_order_payfee.push(value.total_order_payfee);
            total_order_settle.push(value.total_order_settle);
            total_order_addfee.push(value.total_order_addfee);
        });

        var list = [
            {name:'订单总总金额',color:'#25AE4F', data:total_order_business},
            {name:'订单总支付金额',color:'#D89446', data:total_order_payfee},
            {name:'订单总成本价',color:'#ac0c00', data:total_order_settle},
            {name:'总预约加价金额',color:'#7347ac', data:total_order_addfee},
        ]

        var obj = document.getElementById("layer04_right_chart");
        var row_tit = [
            {name:'订单总总金额',icon:'circle'},
            {name:'订单总支付金额',icon:'circle'},
            {name:'订单总成本价',icon:'circle'},
            {name:'总预约加价金额',icon:'circle'},
        ];
        diagram(obj,'',row_tit,{$timeArr},list);
        return true;
    }


    function renderLayer05(){
        var data = {$list};
        var  total_order_coupon= new Array(),total_order_commission= new Array(),
            total_taxfee= new Array(),total_merchant_settle= new Array(),
            total_jiesuan_commission= new Array(),total_withdraw= new Array();
        $.each(data, function (n, value) {

            total_order_coupon.push(value.total_order_coupon);
            total_order_commission.push(value.total_order_commission);
            total_taxfee.push(value.total_taxfee);
            total_merchant_settle.push(value.total_merchant_settle);
            total_jiesuan_commission.push(value.total_jiesuan_commission);
            total_withdraw.push(value.total_withdraw);


        });
        var list = [
            {name:'总使用优惠券面额',color:'#25AE4F', data:total_order_coupon},
            {name:'订单总分出去的佣金总额',color:'#D89446', data:total_order_commission},
            {name:'总手续费',color:'#ac0c00', data:total_taxfee},
            {name:'商家结算总金额',color:'#7347ac', data:total_merchant_settle},
            {name:'总已结算佣金',color:'#06B5C6', data:total_jiesuan_commission},
            {name:'总提现成功金额',color:'#0175EE', data:total_withdraw},
        ]

        var obj = document.getElementById("layer05_chart");
        var row_tit = [
                            {name:'总使用优惠券面额',icon:'circle'},
                            {name:'订单总分出去的佣金总额',icon:'circle'},
                            {name:'总手续费',icon:'circle'},
                            {name:'商家结算总金额',icon:'circle'},
                            {name:'总已结算佣金',icon:'circle'},
                            {name:'总提现成功金额',icon:'circle'},
                        ];

        diagram(obj,'',row_tit,{$timeArr},list);
        return true;
    }

    function renderLayer06(){
        var data = {$list};
        var  total_order_productnum= new Array(),total_business_user= new Array(),
            total_active_user= new Array(),total_level2_user= new Array(),
            total_level3_user= new Array(),total_level4_user= new Array(),total_level5_user= new Array();
        $.each(data, function (n, value) {
            total_order_productnum.push(value.total_order_productnum);
            total_business_user.push(value.total_business_user);
            total_active_user.push(value.total_active_user);
            total_level2_user.push(value.total_level2_user);
            total_level3_user.push(value.total_level3_user);
            total_level4_user.push(value.total_level4_user);
            total_level5_user.push(value.total_level5_user);
        });
        var list = [
            {name:'订单总售出商品数量',color:'#25AE4F', data:total_order_productnum},
            {name:'交易用户量',color:'#D89446', data:total_business_user},
            {name:'活跃用户量',color:'#ac0c00', data:total_active_user},
            {name:'会员注册数量',color:'#7347ac', data:total_level2_user},
            {name:'分销达人数量',color:'#06B5C6', data:total_level3_user},
            {name:'运营达人人数',color:'#0175EE', data:total_level4_user},
            {name:'新增玩主数量',color:'#d9d8ee', data:total_level5_user},
        ]

        var obj = document.getElementById("layer06_chart");
        var row_tit = [
                            {name:'订单总售出商品数量',icon:'circle'},
                            {name:'交易用户量',icon:'circle'},
                            {name:'活跃用户量',icon:'circle'},
                            {name:'会员注册数量',icon:'circle'},
                            {name:'分销达人数量',icon:'circle'},
                            {name:'运营达人人数',icon:'circle'},
                            {name:'新增数量',icon:'circle'},
                        ];

        diagram(obj,'',row_tit,{$timeArr},list);
        return true;
    }








</script>