<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>地图接入</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />

		<style type="text/css">

		</style>
	</head>

	<body>
		<div id="J_el">
			<div class="" v-for="items in list">
				<div class="" style="letter-spacing:1px" v-html="items.djs">
					
				</div>
			</div>
		</div>

		<script src="plugins/vue.js"></script>
		<script src="plugins/jquery-2.1.4.js"></script>
		<script type="text/javascript">
			var vueData = {
				list: [{
					"time": "1543331532000"
				},{
					"time": "1543306390000"
				}, {
					"time": "1543417810000"
				}],
				listBox:[]
			}
			new Vue({
				el: '#J_el',
				data: vueData,
				created: function() {
					vueData.list.map((obj, index) => {
						this.$set(
							obj, "djs", InitTime(obj.time)
						);
					})
					this.listBox = vueData.list;
				},
				methods: function() {
					
				},
				mounted: function() {
					setInterval(() => {
						for(var key in vueData.list) {
							var aaa = parseInt(vueData.list[key]["time"]);
							var bbb = new Date().getTime();
							var rightTime = aaa - bbb;
							console.log(rightTime)
							if(rightTime > 0) {
								var dd = Math.floor(rightTime / 1000 / 60 / 60 / 24);
								var hh = Math.floor((rightTime / 1000 / 60 / 60) % 24);
								var mm = Math.floor((rightTime / 1000 / 60) % 60);
								var ss = Math.floor((rightTime / 1000) % 60);
								vueData.list[key]["djs"] = "<span>"+dd+"</span> 天 <span>"+hh+"</span> : <span>"+mm+"</span> : <span>"+ss+"</span>";
							}else{
								vueData.list[key]["djs"] = "<span>00</span> 天 <span>00</span> : <span>00</span> : <span>00</span>";
							}
						}
					}, 1000);
				},
			});
			console.log(new Date().getTime())
			function InitTime(endtime) {
				var dd, hh, mm, ss = null;
				var time = parseInt(endtime) - new Date().getTime();
				
				if(time <= 0) {
//					return '结束'
					return ' '
				} else {
					dd = Math.floor(time / 60 / 60 / 24);
					hh = Math.floor((time / 60 / 60) % 24);
					mm = Math.floor((time / 60) % 60);
					ss = Math.floor(time % 60);
					var str = dd + "天" + hh + "小时" + mm + "分" + ss + "秒";
//					return str;
					return ' ';
				}
			}
		</script>
	</body>

</html>