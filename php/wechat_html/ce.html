<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	</head>
	<style type="text/css">
		#image {
			width: 100%;
			font-size: 40px;
		}
	</style>

	<body>
		<input type="file" name="opposite" id="image" value="选择上传的图片" />
	</body>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<script type="text/javascript">
		function Go(group_id) {
			$.ajax({
				type: "POST",
				url: "http://cs.lewan6.ren/system/ajax/clickgroup.html",
				data: "group_id=" + group_id,
				dataType: 'json',
				success: function(res) {
					if(res.status == 1) {
						window.location.href = res.data;
					} else {

					}
				}
			});
		}
		Go(1)
		$('#image').on('change', function() {
			var reader = new FileReader();
			var AllowImgFileSize = 2100000; //上传图片最大值(单位字节)（ 2 M = 2097152 B ）超过2M上传失败
			var file = $("#image")[0].files[0];
			var imgUrlBase64;
			if(file) {
				//将文件以Data URL形式读入页面
				imgUrlBase64 = reader.readAsDataURL(file);
				reader.onload = function(e) {
					if(AllowImgFileSize != 0 && AllowImgFileSize < reader.result.length) {
						alert('上传失败，请上传不大于2M的图片！');
						return;
					} else {
						//执行上传操作
						$.ajax({
							url: "http://cs.lewan6.ren/api/Upload/upStreamUserAuthenticatePicToOss",
							method: 'POST',
							data: reader.result,
							success: function(data) {
								console.log(data)
							}
						});
					}
				}
			}
		})
	</script>

</html>